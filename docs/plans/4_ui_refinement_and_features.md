# [実装計画] UI詳細修正と機能実装（API連携・履歴・PWA）

## 概要
`docs/todo.md` に基づき、UIの細かな修正（提案枠の視認性、NG食材の設定パターン拡張）と、未実装の機能（APIのフロントエンド連携、履歴機能、PWAのService Worker対応）を実装する。

## 手動確認チェックリスト
- [ ] ブラウザの開発者ツールで、PWAとしてService Workerが登録されているか確認する
- [ ] 「献立を決める！」ボタンを押して、API呼び出しが行われ、結果画面に遷移するか確認する
- [ ] 提案枠のチェックボックスが未選択時に薄く表示され、選択時に濃く表示されるか確認する
- [ ] NG食材の設定で「NG」「数値指定」「制限なし」の3つが正しく機能し、表示が崩れないか確認する
- [ ] 履歴ページが表示され、過去の献立が表示されるか確認する

## 変更内容

### 1. UIの調整
- **提案枠の視認性改善**:
  - `MealInputRow` のチェックボックス（提案切り替え）の未選択時の透明度を下げて薄くする。
  - 「これを含めて提案」のプレースホルダー等の文字色を濃くして読みやすくする。
- **NG食材設定の拡張**:
  - 「制限なし」ボタン（または状態）を明示的に追加し、「NG（禁止）」「数値指定（上限あり）」「制限なし（監視のみ）」の3状態を切り替えられるようにする。
  - 右端の削除ボタンと干渉しないよう、入力欄やボタンのパディング・マージンを調整する。
  - 追加項目のプレースホルダー「食材を入力」の色を薄くする。

### 2. 機能実装
- **API連携**:
  - `frontend/lib/api.ts` を作成し、Firebase Functions (`suggest_menu`) を呼び出す処理を実装する。
  - 「献立を決める！」ボタン押下時のイベントハンドラにAPI呼び出しを追加し、ローディング表示と結果画面への遷移を実装する。
- **履歴機能**:
  - `frontend/app/history/page.tsx` を新規作成し、保存された献立履歴を表示するUIを実装する。
  - 必要に応じて履歴取得用のAPI (`get_history`) をバックエンドに追加するか、Firestoreから直接取得する処理を実装する。
- **PWA対応**:
  - `next-pwa` を導入し、Service Workerの設定を行う。
  - オフライン時でもアプリが起動するようにキャッシュ戦略を設定する。
  - ヘッダーのロゴなどから必要なアイコン画像（512x512など）を生成・配置する。

## 完了定義
- [ ] `docs/todo.md` の全項目がチェック済みになること。
- [ ] `make verify` または `pnpm build` が正常に終了すること。
- [ ] アプリケーション全体（入力〜保存〜履歴確認）のフローが正常に動作すること。
