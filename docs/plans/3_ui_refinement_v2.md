# [実装計画] UI詳細調整と提案枠入力の拡張

## 概要
`docs/todo.md` に記載されたUI改善項目を実装する。特に「提案」枠にもメニュー名を入力可能にし、それを固定条件として他の料理を提案させるUI改修を行う。

## 手動確認チェックリスト
- [ ] ブラウザで画面が崩れていないか確認する
- [ ] 提案枠に文字を入力できるか確認する
- [ ] 追加ボタンの挙動（間食・夜食のロジック）が正しいか確認する
- [ ] NG食材の削除不可項目が削除ボタンなしになっているか確認する
- [ ] 結果画面のレイアウト（マージン、ボタン幅）が適切か確認する

## 変更内容

### 1. 食事プラン入力の拡張 (`frontend/app/page.tsx`)
- 提案枠の入力許可:
  - `type="target"` の場合でも `Input` フィールドを表示する（現在は "選択中" というテキストのみ）。
  - プレースホルダーを「これを含めて提案してほしい（例: 白米）」等に変更し、入力可能であることを明示する。
- 食事区分ロジックの修正:
  - 「おやつ」を全面的に「間食」に変更。
  - `addMeal` ロジック修正:
    - 常に「間食」を挿入するように変更（朝・昼の間など）。
    - 夜の下の追加ボタン: 既に「夜食」が存在する場合は「間食」を追加し、「夜食」がない場合のみ「夜食」を追加するロジックに変更。

### 2. 制限・NG食材UIの調整
- デフォルト項目の固定:
  - `id` が `sugar-total`, `sugar`, `oil`, `salt` の項目について、削除ボタン（ゴミ箱アイコン）を表示しないように制御。
- プレースホルダー調整:
  - 追加された（デフォルト以外の）入力欄のプレースホルダーの文字色を薄くする（`text-muted-foreground/30` 等）。

### 3. 提案結果画面のレイアウト修正
- 余白削除:
  - 提案カード（Target枠）の左マージン（`ml-4` 等）を削除し、親コンテナ一杯に広げる。
  - `LoggedMealCard` も同様に左マージンを調整し、リスト全体の左端を揃える。
- ボタン幅:
  - 「保存する」ボタンの親コンテナのグリッド設定（`grid-cols-2`）を解除し、ボタンを `w-full` で配置する。

### 4. 全体・PWA・API
- アイコン準備:
  - `favicon.ico` を生成して配置。
  - PWA用アイコン (`icon-192x192.png`, `icon-512x512.png`) を生成して配置。
- PWA対応:
  - `manifest.json` を作成・配置。
  - Service Worker (next-pwa等) の導入は今回は見送り、基本的なManifest対応のみ行う（まずはアイコンとテーマカラー）。
- API実装:
  - `backend/src` に提案API (`suggest_menu`) を実装。
  - 履歴保存API (`save_history`) を実装。
  - APIテスト用のスクリプトまたは検証手順を用意。

### 5. ドキュメント更新
- `AGENTS.md` のデータ構造は更新済み。

## 完了定義
- [ ] `docs/todo.md` の全項目がチェック済みになること。
- [ ] `make verify` または `pnpm build` が正常に終了すること。
- [ ] 提案枠に「白米」と入力した状態でリクエストを送れる状態になっていること。
- [ ] PWAとしてインストール可能（Manifestが認識される）になっていること。
- [ ] APIが正常にレスポンスを返すこと（ローカル検証）。
